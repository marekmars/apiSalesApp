<section class="">
  <div class="  mx-auto z-10">
    <div class="   rounded-lg  dark:bg-gray-900 dark:border-gray-900">

      @if(user){
      <div class="pb-6 border-b  dark:border-gray-700 ">
        <h2 class="text-xl font-bold text-gray-800 md:text-3xl dark:text-gray-300">
          User NÂ° <small>{{user?.id}}</small>
        </h2>

      </div>
      }@else {
      <div class="pb-6 border-b  dark:border-gray-700 ">
        <h2 class="text-xl font-bold text-gray-800 md:text-3xl dark:text-gray-300">
          Add User
        </h2>
      </div>
      }

      <form [formGroup]="userForm">
        <div class=" px-4 mx-auto">
          <div class="  rounded-lg  dark:bg-gray-DOTN900 dark:border-gray-900">


            <div class="py-6 border-b  dark:border-gray-800">
              <div class="w-full ">
                <div class="flex flex-wrap -m-3">
                  <div class="w-full p-3 md:w-1/3">
                    <p class="text-base font-semibold text-gray-700 dark:text-gray-400"
                      [ngClass]="{ 'text-red-700 dark:text-red-500': isFieldValid(userForm,'name') }">
                      Name
                    </p>
                  </div>
                  <div class="w-full p-3 md:flex-1">
                    <input formControlName="name"
                      [ngClass]="{'dark:text-red-500 dark:placeholder-red-500 dark:border-red-500 dark:focus:ring-red-500 dark:focus:border-red-500': isFieldValid(userForm,'name') }"
                      class="w-full px-4 py-2.5 dark:bg-gray-800 dark:border-gray-800 dark:placeholder-gray-500 dark:text-gray-400  text-base text-gray-900 rounded-lg font-normal border border-gray-200"
                      type="text" placeholder="Adam">
                    @if (isFieldValid(userForm,'name')) {
                    <p class="text-red-700 dark:text-red-500 mt-2">{{getFieldError(userForm,'name')}}</p>
                    }
                  </div>
                </div>
              </div>
            </div>
            <div class="py-6 border-b  dark:border-gray-800">
              <div class="w-full ">
                <div class="flex flex-wrap -m-3">
                  <div class="w-full p-3 md:w-1/3">
                    <p class="text-base font-semibold text-gray-700 dark:text-gray-400"
                      [ngClass]="{ 'text-red-700 dark:text-red-500': isFieldValid(userForm,'lastName') }">
                      Last Name
                    </p>
                  </div>
                  <div class="w-full p-3 md:flex-1">
                    <input formControlName="lastName"
                      [ngClass]="{'dark:text-red-500 dark:placeholder-red-500 dark:border-red-500 dark:focus:ring-red-500 dark:focus:border-red-500': isFieldValid(userForm,'lastName') }"
                      class="w-full px-4 py-2.5 dark:bg-gray-800 dark:border-gray-800 dark:placeholder-gray-500 dark:text-gray-400  text-base text-gray-900 rounded-lg font-normal border border-gray-200"
                      type="text" placeholder="Smith">
                    @if (isFieldValid(userForm,'lastName')) {
                    <p class="text-red-700 dark:text-red-500 mt-2">{{getFieldError(userForm,'lastName')}}</p>
                    }
                  </div>
                </div>
              </div>
            </div>
            <div class="py-6 border-b  dark:border-gray-800">
              <div class="w-full ">
                <div class="flex flex-wrap -m-3">
                  <div class="w-full p-3 md:w-1/3">
                    <p class="text-base font-semibold text-gray-700 dark:text-gray-400"
                      [ngClass]="{ 'text-red-700 dark:text-red-500': isFieldValid(userForm,'mail') }">
                      Email address
                    </p>
                  </div>
                  <div class="w-full p-3 md:flex-1">
                    <input formControlName="mail"
                      [ngClass]="{'dark:text-red-500 dark:placeholder-red-500 dark:border-red-500 dark:focus:ring-red-500 dark:focus:border-red-500': isFieldValid(userForm,'mail') }"
                      class="w-full px-4 py-2.5 dark:bg-gray-800 dark:border-gray-800 dark:placeholder-gray-500 dark:text-gray-400  text-base text-gray-900 rounded-lg font-normal border border-gray-200"
                      type="email" placeholder="adam@gmail.com">
                    @if (isFieldValid(userForm,'mail')) {
                    <p class="text-red-700 dark:text-red-500 mt-2">{{getFieldError(userForm,'mail')}}</p>
                    }
                  </div>
                </div>
              </div>
            </div>
            <div class="py-6 border-b  dark:border-gray-800">
              <div class="w-full ">
                <div class="flex flex-wrap -m-3">
                  <div class="w-full p-3 md:w-1/3">
                    <p class="text-base font-semibold text-gray-700 dark:text-gray-400"
                      [ngClass]="{ 'text-red-700 dark:text-red-500': isFieldValid(userForm,'password') }">
                      Password
                    </p>
                  </div>
                  <div class="w-full p-3 md:flex-1">
                    <input formControlName="password"
                      [ngClass]="{'dark:text-red-500 dark:placeholder-red-500 dark:border-red-500 dark:focus:ring-red-500 dark:focus:border-red-500': isFieldValid(userForm,'password') }"
                      class="w-full px-4 py-2.5 dark:bg-gray-800 dark:border-gray-800 dark:placeholder-gray-500 dark:text-gray-400  text-base text-gray-900 rounded-lg font-normal border border-gray-200"
                      type="password" placeholder="********">
                    @if (isFieldValid(userForm,'password')) {
                    <p class="text-red-700 dark:text-red-500 mt-2">{{getFieldError(userForm,'password')}}</p>
                    }
                  </div>
                </div>
              </div>
            </div>
            <div class="py-6 border-b  dark:border-gray-800">
              <div class="w-full ">
                <div class="flex flex-wrap -m-3">
                  <div class="w-full p-3 md:w-1/3">
                    <label class="text-base font-semibold text-gray-700 dark:text-gray-400"
                      [ngClass]="{ 'text-red-700 dark:text-red-500': isFieldValid(userForm,'idCard') }">
                      Id Card
                    </label>
                  </div>
                  <div class="w-full p-3 md:flex-1">
                    <input formControlName="idCard"
                      [ngClass]="{'dark:text-red-500 dark:placeholder-red-500 dark:border-red-500 dark:focus:ring-red-500 dark:focus:border-red-500': isFieldValid(userForm,'idCard') }"
                      class="w-full px-4 py-2.5 dark:bg-gray-800 dark:border-gray-800 dark:placeholder-gray-500 dark:text-gray-400  text-base text-gray-900 rounded-lg font-normal border border-gray-200"
                      type="text" placeholder="123456789">
                    @if (isFieldValid(userForm,'idCard')) {
                    <p class="text-red-700 dark:text-red-500 mt-2">{{getFieldError(userForm,'idCard')}}</p>
                    }

                  </div>
                </div>
              </div>
            </div>
            <div class="py-6 border-b  dark:border-gray-800">
              <div class="w-full ">
                <div class="flex flex-wrap -m-3">
                  <div class="w-full p-3 md:w-1/3">
                    <label class="text-base font-semibold text-gray-700 dark:text-gray-400"
                      [ngClass]="{ 'text-red-700 dark:text-red-500': isFieldValid(userForm,'idRole') }">
                      Role
                    </label>
                  </div>
                  <div class="w-full p-3 md:flex-1">
                    <shared-dropdown [dropdownValues]="rolesNames" [selectedValue]="selectedRoleName"
                    (selectedValueChange)="setRole($event)"></shared-dropdown>
                  </div>
                </div>
              </div>
            </div>

            <div class="py-6 border-b w-full  dark:border-gray-800">
              <div class="w-full">
                <div class="flex flex-wrap w-full  justify-center">
                  <div class="w-full">
                    <label class="text-base font-semibold text-gray-800 dark:text-gray-400">Avatar </label>
                  </div>
                  <shared-drag-and-drop-img (filesChanged)="handleFileInput($event)" (imgUrl)="deleteImg($event)"
                    [imageUrlsAdded]="imageUrls" [filesAdded]="imagesFiles"
                    [limitFiles]="imgLimit"></shared-drag-and-drop-img>
                </div>
              </div>
            </div>

            <div class="flex pt-6 flex-wrap -m-1.5">
              <div class="w-full md:w-auto p-1.5">
                <button (click)="cancel()" type="button"
                  class="flex flex-wrap justify-center w-full px-4 py-2 text-sm font-medium text-gray-500  border-gray-200 rounded-md dark:text-gray-300 dark:bg-gray-700 dark:hover:bg-gray-800 dark:border-gray-700 hover:border-gray-300 ">
                  <p>Cancel</p>
                </button>
              </div>
              <div class="w-full md:w-auto p-1.5">
                <button (click)="openDialog()" type="button"
                  class="z-10 flex flex-wrap justify-center w-full px-4 py-2 text-sm font-medium text-white bg-green-500 border border-green-500 rounded-md hover:bg-green-600 ">
                  <p>{{submitButtonTxt}}</p>
                </button>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>


</section>
